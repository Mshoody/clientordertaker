<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BASS Order Bot | Demo</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-slate-50 p-4">

    <div class="max-w-md mx-auto bg-white rounded-3xl shadow-xl overflow-hidden border border-slate-100">
        <div class="bg-slate-900 p-6 text-white">
            <h1 class="text-2xl font-bold">Quick Order Bot</h1>
            <p class="text-slate-400 text-sm">BASS Ltd. Kitchen Automation</p>
        </div>

        <form id="orderForm" class="p-6 space-y-4">
            <div>
                <label class="block text-sm font-bold text-slate-700">Customer Name</label>
                <input type="text" id="custName" required class="w-full p-3 bg-slate-100 rounded-xl outline-none focus:ring-2 ring-cyan-500">
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-700">Select Meal</label>
                <select id="meal" class="w-full p-3 bg-slate-100 rounded-xl outline-none">
                    <option>Jollof Rice & Chicken</option>
                    <option>Pounded Yam & Egusi</option>
                    <option>Fried Rice & Turkey</option>
                    <option>Beef Burger & Fries</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-700">Quantity</label>
                <input type="number" id="qty" value="1" min="1" class="w-full p-3 bg-slate-100 rounded-xl outline-none">
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-700">Special Instructions (Optional)</label>
                <textarea id="notes" placeholder="e.g. No onions, extra pepper..." class="w-full p-3 bg-slate-100 rounded-xl outline-none"></textarea>
            </div>

            <button type="submit" class="w-full bg-green-500 text-white font-bold py-4 rounded-xl flex items-center justify-center gap-2 hover:bg-green-600 transition">
                <i data-lucide="message-circle"></i> Send Order via WhatsApp
            </button>
        </form>
    </div>

    <script>
        lucide.createIcons();

        const form = document.getElementById('orderForm');
        form.onsubmit = async (e) => {
    e.preventDefault();

    // 1. COLLECT: Pull values from the HTML form
    const name = document.getElementById('custName').value;
    const meal = document.getElementById('meal').value;
    const qty = document.getElementById('qty').value;
    const notes = document.getElementById('notes').value || "None";

    // 2. CAPTURE: Send to your Google Apps Script (The Excel Bridge)
    const webhookURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vSGnmDzN_ZC74DGKCCtZto76K9FcBp0HffhEONxFIbvJ0GoEGNgH8q8ohx9gUivuGbb_8j5-n_eBcas/pub?output=csv"; 
    
    // We use 'fetch' to send data to the background without refreshing the page
    fetch(webhookURL, {
        method: 'POST',
        mode: 'no-cors', // Essential for Google Apps Script web apps
        body: JSON.stringify({ name, meal, qty, notes })
    });

    // 3. ENCODE: Prepare the message for the WhatsApp API
    // We use encodeURIComponent to ensure special characters don't break the link
    const kitchenNumber = "2348066091520"; // The restaurant's WhatsApp number
    const boldTitle = "*NEW ORDER ALERT* ðŸ¥˜";
    const body = `\n------------------\n*Customer:* ${name}\n*Item:* ${meal}\n*Qty:* ${qty}\n*Notes:* ${notes}\n------------------`;
    const footer = `\n_Generated by BASS Automation_`;

    const fullMessage = boldTitle + body + footer;
    const encodedMessage = encodeURIComponent(fullMessage);

    // 4. TRIGGER: This opens the WhatsApp App on mobile or WhatsApp Web on PC
    const whatsappLink = `https://wa.me/${kitchenNumber}?text=${encodedMessage}`;
    
    // Redirect the user to WhatsApp
    window.open(whatsappLink, '_blank');
    
    // Optional: Reset form or show a success message
    alert("Order Sent! Opening WhatsApp...");
};
    </script>
</body>

</html>
